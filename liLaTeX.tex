%%%%%%%%%%%%%%%% FLAG (per i nuovi utenti: aggiornare le prime 5 flags)

\providecommand{\liLaTeXPath}{C:/Users/themi/Desktop/LaTeX/liLaTeX} % l'indirizzo dove è stato salvato il file liLaTeX.tex
\providecommand{\LogoScuolaPath}{C:/Users/themi/Desktop/LaTeX/liLaTeX/Logo_Liceo_Scientifico_Francesco_Vercelli.jpeg} % il file immagine col logo della scuola
\providecommand{\NomeScuola}{Liceo Scientifico \textit{F.Vercelli}} % il nome della scuola
\providecommand{\CittaScuola}{Asti} % la città in cui si trova la scuola
\providecommand{\AnnoScolastico}{2024-2025} % l'anno scolastico di riferimento (da cambiare una volta all'anno)
\providecommand{\PuntiBaseVerifica}{10} % Numero di punti di base in una verifica. Cancella se non dai nessun punto base
\providecommand{\Data}{} % la data della prova (facoltativa)
\providecommand{\NomeStudente}{} % il nome dello studete con file personale (facoltativo)
\providecommand{\CognomeStudente}{} % il cognome dello studente con file personale (facoltativo)
\providecommand{\NomeClasse}{} % il nome della classe (facoltativo)
\providecommand{\Minuti}{} % il numero di minuti di durata della prova (solo per verifiche)
\providecommand{\Materia}{} % Matematica o Fisica
\providecommand{\Titolo}{} % il titolo del documento
\providecommand{\MarginSize}{1.5} % il margine (in cm). Non settarlo per le immagini
\providecommand{\FontSize}{11} % la dimensione del testo (in pt)
\providecommand{\TipoDoc}{plain} % il tipo di file. Attualmente supportati: {plain, immagine, verifica, verifica recupero, esercizio svolto, lista esercizi, scheda, scheda SSPM, scheda laboratorio, prova laboratorio, gara olimpiadi, lezione, dimostrazione, formulario}
\providecommand{\NumPages}{} % può essere posto a 0 se non vogliamo numerare le pagine oppure a 1 se vogliamo numerarle. Se non specificato, le pagine vengono numerate se e solo se ce n'è più di una (nel caso serve compilare due volte)
\providecommand{\colText}{black} % il colore di esercizi, teoremi e dimostrazioni
\providecommand{\colDim}{blue} % il colore di dimostrazioni e soluzioni
\providecommand{\colSI}{} % il colore delle unità di misura

%%%%%%%%%%%%%%%% PACCHETTI

\usepackage[T1]{fontenc} % per riconoscere caratteri come è
\usepackage{babel} % supporto per l'italiano (o per le altre lingue)
\usepackage{etoolbox} % if-else commands come \ifdefempty{cs}{T}{F} e \ifdefstring{cs}{string}{T}{F}
\usepackage{amsmath} % comandi matematici
\usepackage{mathrsfs} % per \mathscr
\usepackage{amssymb} % per \varepsilon e simili
\usepackage{amsthm} % definisce \qedsymbol
\usepackage{enumitem} % serve per noitemsep e nolistsep negli itemize e enumerate
\usepackage{multirow} % per l'opzione \multirow{n}{*}{testo} in tabular
\usepackage{mathcomp} % contiene il comando \tccentigrade (per i gradi centrigradi)
\usepackage{eurosym} % contiene il comando \euro (da usare fuori dall'ambiente matematico)
\usepackage{dsfont} % per definire \mathbb{1}, che abbiamo chiamato \bUNO
\usepackage[fontsize=\FontSize pt]{fontsize} % modifica il font size
\ifdefstring{\TipoDoc}{immagine}{}{\usepackage[margin=\MarginSize cm]{geometry}} % margini
\usepackage{graphicx} % per \includegraphics
\usepackage{caption} % per \caption* e \captionbox
\usepackage[dvipsnames]{xcolor} % pacchetto dei colori
\usepackage{tikz} % tikz è il pacchetto per le immagini. Definisce tikzfigure
\usetikzlibrary{decorations.pathmorphing,patterns} % per springs e brackets
\usepackage{pgfplots} % pacchetto per plot
\usepackage{fancyhdr} % pacchetto per l'impaginazione
\usepackage{refcount}% contiene il comando \getpagerefnumber usato per contare il numero di pagine nel documento (serve per l'impaginazione)
\usepackage{lastpage} % definisce il parametro LastPage, che indica l'ultima pagina del file. Serve per l'impaginazione
\usepackage{adjustbox} % necessario per l'ambiente \adjustbox, utile per disegnare la tabella dei voti
\usepackage{witharrows} % usato per \[\begin{WithArrows}...\end{WithArrows}\] Da includere dopo xcolor
\usepackage{pdfpages} % usato per \includepdf

%%%%%%%%%%%%%%%% SOVRASCRITTURA DELLE FLAG

% sovrascrive #1 con #2 solo se #1 è vuoto
\newcommand{\overwriteifempty}[2]{\ifdefempty{#1}{\renewcommand{#1}{#2}}{}}

% in caso di verifica sovrascrive il titolo, se vuoto
\ifdefstring{\TipoDoc}{verifica}{\overwriteifempty{\Titolo}{Verifica di \Materia}}{}
\ifdefstring{\TipoDoc}{verifica recupero}{\overwriteifempty{\Titolo}{Verifica di recupero di \Materia}}{}
\ifdefstring{\TipoDoc}{prova laboratorio}{\overwriteifempty{\Titolo}{Prova di laboratorio di \Materia}}{}

% controlla se \TipoDoc è uno dei tipi conosciuti, altrimenti genera un errore di compilazione
\newcounter{TipoDocGuardCounter}
\ifdefstring{\TipoDoc}{plain}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{immagine}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{verifica}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{verifica recupero}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{esercizio svolto}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{lista esercizi}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{scheda}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{scheda SSPM}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{scheda laboratorio}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{prova laboratorio}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{gara olimpiadi}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{lezione}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{dimostrazione}{\stepcounter{TipoDocGuardCounter}}{}
\ifdefstring{\TipoDoc}{formulario}{\stepcounter{TipoDocGuardCounter}}{}
\ifnum\value{TipoDocGuardCounter}=0 \errmessage{TipoDoc = \TipoDoc\space non e' un valore valido} \fi

% 1 se \TipoDoc è un qualche tipo di verifica, 0 altrimenti
\newcounter{TipoDocVerificaCounter}
\ifdefstring{\TipoDoc}{verifica}{\stepcounter{TipoDocVerificaCounter}}{}
\ifdefstring{\TipoDoc}{verifica recupero}{\stepcounter{TipoDocVerificaCounter}}{}
\ifdefstring{\TipoDoc}{prova laboratorio}{\stepcounter{TipoDocVerificaCounter}}{}

%%%%%%%%%%%%%%%% IMPAGINAZIONE

% specifica il valore di \NumPages se non è stato specificato dall'utente. Funziona solo a partire dalla seconda compilazione. È comunque settato come 0 per le immagini
\ifnum\getpagerefnumber{LastPage}>1\relax \overwriteifempty{\NumPages}{1} \else \overwriteifempty{\NumPages}{0} \fi
\ifdefstring{\TipoDoc}{immagine}{\renewcommand{\NumPages}{0}}

% crea l'impaginazione per le verifiche
\fancypagestyle{VerificaPageStyle}{%
	\fancyhf{} % resetta impaginazioni residue
    \renewcommand{\headrulewidth}{0pt} % rimuovi la linea in cima alla pagina
    \renewcommand{\footrulewidth}{0pt} % rimuovi la linea in fondo alla pagina
	\pgfmathsetmacro\FontSizeSkip{1.2*\FontSize} % lo spazio verticale da lasciare
    \chead{ % la tabella in cima alle pagine dispari
    	\ifodd\thepage\fontsize{\FontSize}{\FontSizeSkip}\selectfont
    	\pgfmathsetmacro\NomeCognomeLogoWidth{2} % la dimensione del logo
    	\pgfmathsetmacro\NomeCognomeTabellaWidth{21-2*\MarginSize-\NomeCognomeLogoWidth} % la dimensione della tabella
	\pgfmathsetmacro\NomeCognomeTabellaLeftWidth{.5*\NomeCognomeTabellaWidth-.25*\NomeCognomeLogoWidth-.3+2} % la larghezza della parte a sinistra della tabella
	\pgfmathsetmacro\NomeCognomeTabellaRightWidth{.5*\NomeCognomeTabellaWidth-.25*\NomeCognomeLogoWidth-.3-2} % la larghezza della parte a destra della tabella
    	\begingroup\renewcommand\arraystretch{1.5}\begin{center} % lo spazio fra le righe in tabella
    	\Titolo\ifdefempty{\Minuti}{}{\hspace*{1cm}(\textbf{\Minuti} minuti)}\\\vspace{3mm} % la riga con titolo e numero di minuti per la verifica
		\begin{minipage}{\NomeCognomeTabellaWidth cm}\begin{center}
	\boxed{\begin{tabular}[t]{p{\NomeCognomeTabellaLeftWidth cm}p{\NomeCognomeTabellaRightWidth cm}}
	COGNOME: \ifdefempty{\CognomeStudente}{\dotfill}{\CognomeStudente} & CLASSE: \NomeClasse \\
	NOME: \ifdefempty{\NomeStudente}{\dotfill}{\NomeStudente} & \NomeScuola \\
	\CittaScuola,\ifdefempty{\Data}{\dotfill}{\Data} & a.s. \AnnoScolastico \\
	\end{tabular}}\end{center}
	\end{minipage}\begin{minipage}{\NomeCognomeLogoWidth cm}
	\includegraphics[height=2cm]{\LogoScuolaPath}
	\end{minipage}\end{center}
	\endgroup
    \fi} % intestazione nell'head (solo pagine dispari)
    \cfoot{\ifdefstring{\NumPages}{0}{}{\fontsize{\FontSize}{\FontSizeSkip}\selectfont\thepage}} % scrivi il numero della pagina in fondo (centrato)
}

\ifnum\value{TipoDocVerificaCounter}=1 % se il file è un file di verifica
\makeatletter % contiene comandi del tipo @, quidni va racchiuso fra \makeatletter e \makeatother
	\pagestyle{VerificaPageStyle}
	% questa parte definisce dove posizionare il testo rispetto all'impaginazione
	\ifdefstring{\NumPages}{0}{\textheight=25.2cm}{\textheight=24.2cm} % Lo spazio verticale riservato per il testo
	\pgfmathsetmacro\HeaderPts{10*\FontSize-20}
	\pgfmathsetmacro\HeaderPtsDiff{25}
	\pgfmathsetmacro\ExtraHeaderPts{\HeaderPts-\HeaderPtsDiff}
	\patchcmd\@outputpage{\headsep}{\ifodd\count\z@ \HeaderPts pt\else \HeaderPtsDiff pt\fi}{}{}
	\patchcmd\@outputpage{\global\@colht\textheight}{\global\advance\textheight by \ifodd\count\z@ +\ExtraHeaderPts pt \else -\ExtraHeaderPts pt \fi\global\@colht\textheight}{}{}
\makeatother
\else
	\ifdefstring{\NumPages}{0}{\pagestyle{empty}}{\pagestyle{plain}}
\fi

%%%%%%%%%%%%%%%% TABELLA VOTI

% iteratori utili per \TabellaVoti
\newcounter{TabellaVotiEsNumIter}
\newcounter{TabellaVotiLetterIter}
\newcounter{TabellaVotiPervBarIter}

% assume valori 0-1 per determinare se al termine della colonna attuale dobbiamo disegnare una riga verticale nella prima riga (ovvero se la colonna si riferisce all'ultimo punto dell'attuale esercizio)
\newcommand\TabellaVotiHeaderJump{1}

% Chiama \TabellaVoti a fine verifica per creare la tabella per mettere i punti.
% Il seguente esempio mostra come creare la tabella per una verifica con 6 esercizi (di cui l'es. 3 è diviso in 2 punti e l'es. 5 è diviso in 3 punti) in cui ciascun esercizio vale 30 punti (equamente distribuiti fra i vari punti dell'esercizio):
% \TabellaVoti{{30}{30}{15,15}{30}{10,10,10}{30}}
% La funzione principale per crare \TabellaVoti
\newcommand\TabellaVoti[1]{
	\pgfmathsetmacro\TabellaVotiTabellaWidth{18}
	\pgfmathsetmacro\TabellaVotiHeight{1}
	\pgfmathsetmacro\TabellaVotiPtBaseWidth{2}
	\TabellaVotiInizializzaContenitori[\PuntiBaseVerifica]#1 % leggi i dati in input. È importante che sia #1 e non {#1}
	\ifnum\TabellaVotiDrawLettersRow>0 \def\t{2} \else \def\t{1} \fi % decidi se disegnare anche la riga delle lettere
	\vspace*{\fill} % spostati a fondo pagina
	{\Large\begin{center}
	\makebox[0cm]{ % elimina i margini
	\begin{adjustbox}{minipage=\TabellaVotiTabellaWidth cm, center} % permette di disegnare in un'area estesa orizzontalmente (larga \TabellaVotiTabellaWidth)
	\begin{tikzpicture}
	\pgfmathsetmacro\ltot{\TabellaVotiTabellaWidth-\TabellaVotiPtBaseWidth} % il punto più a destra raggiunto dalla tabella (quello più a sinistra è -\TabellaVotiPtBaseWidth
	\pgfmathsetmacro\l{divide(\ltot,\theTabellaVotiNumLett+1)} % la larghezza di ciascuna colonna (diversa da quelle di Pt.base)
	% disegna le righe orizzontali
	\foreach \y in {-2,...,\t} {\draw (-\TabellaVotiPtBaseWidth,\y*\TabellaVotiHeight) -- ++(\TabellaVotiTabellaWidth,0);}
	\draw[ultra thick] (-\TabellaVotiPtBaseWidth,0) -- ++(\TabellaVotiTabellaWidth,0);
	% le due righe verticali più a sinistra e le due più a destra
	\draw (-\TabellaVotiPtBaseWidth,-2*\TabellaVotiHeight) -- (-\TabellaVotiPtBaseWidth,\t*\TabellaVotiHeight);
	\draw (\ltot,-2*\TabellaVotiHeight) -- (\ltot,\t*\TabellaVotiHeight);
	\draw[ultra thick] (0,-2*\TabellaVotiHeight) -- (0,\t*\TabellaVotiHeight);
	\draw[ultra thick] (\ltot-\l,-2*\TabellaVotiHeight) -- (\ltot-\l,\t*\TabellaVotiHeight);
	% scriviamo dentro alla prima e all'ultima colonna
	\node (W) at (-.5*\TabellaVotiPtBaseWidth,\t*\TabellaVotiHeight-.5*\TabellaVotiHeight) {Pt.base};
	\node (W) at (\ltot-.5*\l,\t*\TabellaVotiHeight-.5*\TabellaVotiHeight) {\textbf{Tot.}};
	\node (W) at (\ltot-.5*\l,-.5*\TabellaVotiHeight) {\theTabellaVotiPuntiTot};
	\node (W) at (-.5*\TabellaVotiPtBaseWidth,-.5*\TabellaVotiHeight) {\PuntiBaseVerifica};
	\node (W) at (-.5*\TabellaVotiPtBaseWidth,-1.5*\TabellaVotiHeight) {\PuntiBaseVerifica};
	% alcuni counter utili per il successivo loop
	\setcounter{TabellaVotiEsNumIter}{1} % un iteratore per tenere traccia dell'attuale esercizio
	\setcounter{TabellaVotiLetterIter}{0} % un iteratore per tenere traccia dell'attuale lettera
	\setcounter{TabellaVotiPervBarIter}{0} % un iteratore per tenere traccia dell'altezza a cui abbiamo tracciato l'ultima barra verticale nella prima riga (dove è iniziato l'attuale esercizio)
	\renewcommand\TabellaVotiHeaderJump{1}
	% le colonne coi punti dei vari esercizi
	\foreach \x in {1,...,\theTabellaVotiNumLett} {
		\stepcounter{TabellaVotiLetterIter} % incrementa l'iteratore della lettera
		\ifnum\csname TabellaVotiBarraPerLettera:\theTabellaVotiNumTabelle:\x\endcsname=1
			% se la colonna attuale è l'ultima dell'attuale esercizio
			\renewcommand\TabellaVotiHeaderJump{1} % la riga verticale deve raggiungere anche la prima riga
			\node (W) at (.5*\value{TabellaVotiPervBarIter}*\l+.5*\x*\l,\t*\TabellaVotiHeight-.5*\TabellaVotiHeight) {Es.\textbf{\theTabellaVotiEsNumIter}}; % scrivi il numero dell'esercizio nella prima riga
			\ifnum\value{TabellaVotiLetterIter}>1
				% se non è l'unica colonna di questo esercizio, scrivi la lettera dell'esercizio (se esiste la riga delle lettere)
				\ifnum\t>0 \node (W) at (\x*\l-.5*\l,.5*\TabellaVotiHeight) {\textbf{\alph{TabellaVotiLetterIter}.}}; \fi
			\fi
			% aggiorna gli iteratori
			\setcounter{TabellaVotiPervBarIter}{\x} % segnamo che abbiamo appena tracciato una riga verticale nella prima riga (ci servirà per stabilire la posizione in cui scrivere il nodo nella prima riga per il prossimo esercizio)
			\stepcounter{TabellaVotiEsNumIter} % scriviamo che siamo al prossimo esercizio
			\setcounter{TabellaVotiLetterIter}{0} % dal momento che siamo in un nuovo esercizio, dobbiamo resettare le lettere
		\else
			% se la colonna attuale NON è l'ultima dell'attuale esercizio, come prima cosa scriviamo la lettera dell'attuale colonna (se esiste la riga delle lettere)
			\ifnum\t>0 \node (W) at (\x*\l-.5*\l,.5*\TabellaVotiHeight) {\textbf{\alph{TabellaVotiLetterIter}.}}; \fi
			\renewcommand\TabellaVotiHeaderJump{0} % la riga verticale NON deve raggiungere la prima riga
		\fi
		\ifnum\x<\theTabellaVotiNumLett
			% disegna la riga verticale a destra dell'attuale esercizio
			\draw (\x*\l,-2*\TabellaVotiHeight) -- ++(0,2*\TabellaVotiHeight+\t*\TabellaVotiHeight-\TabellaVotiHeight+\TabellaVotiHeaderJump*\TabellaVotiHeight);
		\fi
		\node (W) at (\x*\l-.5*\l,-.5*\TabellaVotiHeight) {\getTabellaVotiPuntiPerLettera[\x]}; % scriviamo quanti punti vale l'esercizio nella colonna
		\draw[line width=2pt] (\ltot,-2*\TabellaVotiHeight) rectangle ++(-\l,\TabellaVotiHeight); % la casella in basso a destra viene ripassata
	}
	\end{tikzpicture}
	\end{adjustbox}}
	\end{center}}
	\begin{center}
	{\Huge \setlength\fboxsep{5mm}\boxed{\hspace*{-3mm}\textbf{Voto:} \hspace*{30mm}}} % il box in cui scrivere il voto
	\ifdefstring{\TipoDoc}{verifica recupero}{{\Large\hspace*{10mm}\vspace*{-\baselineskip}
		\begin{tabular}{l}
		Debito saldato:\\
		$\mkern2mu\framebox[16mm]{\huge \textbf{SI}}\mkern15mu\framebox[16mm]{\huge \textbf{NO}}$
		\end{tabular}\\\vspace*{4mm}
	}}{} % per segnare se lo studente ha superato il debito
	\end{center}
}

% valori utili durante la lettura dei dati dall'input per \TabellaVoti
\newcommand\TabellaVotiDrawLettersRow{0} % può essere 0 (falso) o 1 (vero)
\newcounter{TabellaVotiNumLett} % quante lettere ci sono in tutto (se ad es. ci sono es: 1a,1b,2 TabellaVotiNumLett=3)
\newcounter{TabellaVotiPuntiTot} % quanti sono i punti totali per la verifica (idealmente 100)
\newcounter{TabellaVotiNumTabelle} % indica quale tabella di \TabellaVoti stiamo scrivendo (se è la prima, o se ne abbiamo già scritte precedentemente). Questo ci permette di creare più tabelle nello stesso documento.
\newcommand\TabellaVotiInizializzaContenitoriIterOpenNum{0} % usata nella lettura dei dati. Indica se stiamo già leggendo un numero

% funzioni per la gestione dell'array TabellaVotiPuntiPerLettera (quanti punti venono assegnati in ogni colonna della tabella)
\newcommand\storedataTabellaVotiPuntiPerLettera[1][0]{
	\expandafter\newcommand\csname TabellaVotiPuntiPerLettera:\theTabellaVotiNumTabelle:\theTabellaVotiNumLett\endcsname{#1}
}
\newcommand\getTabellaVotiPuntiPerLettera[1][0]{\csname TabellaVotiPuntiPerLettera:\theTabellaVotiNumTabelle:#1\endcsname}

% funzioni per la gestione dell'array TabellaVotiBarraPerLettera (valori 0-1 per decidere se si tratta dell'ultima colonna relativa ad un esercizio)
\newcommand\storedataTabellaVotiBarraPerLettera[1][0]{
	\expandafter\newcommand\csname TabellaVotiBarraPerLettera:\theTabellaVotiNumTabelle:\theTabellaVotiNumLett\endcsname{#1}
}

\makeatletter
% La funzione più esterna nella lettura dell'input per \TabellaVoti
\newcommand\TabellaVotiInizializzaContenitori[1][0]{
	\stepcounter{TabellaVotiNumTabelle}
	\renewcommand\TabellaVotiDrawLettersRow{0}
	\setcounter{TabellaVotiNumLett}{0}
	\setcounter{TabellaVotiPuntiTot}{#1}
	\@ifnextchar\bgroup{\TabellaVotiInizializzaContenitoriIter}{}
}

% Una funzione di iterazione nella lettura dell'input per \TabellaVoti. Viene chiamata una volta per ciascun esercizio. La suddivisione fra gli esercizi viene fatta a "blocchi" (racchiusi fra {}), ma la lettura dentro a queste {} avviene un carattere alla volta
\newcommand\TabellaVotiInizializzaContenitoriIter[1]{
	\TabellaVotiInizializzaContenitoriIterComma,#1
	\@ifnextchar\bgroup{\TabellaVotiInizializzaContenitoriIter}{}
}

% Usata all'interno della lettura dell'input per \TabellaVoti quando leggiamo un separatore (una virgola) dall'input
\newcommand\TabellaVotiInizializzaContenitoriIterComma[2][0]{
	\ifnum#1=1 \renewcommand\TabellaVotiDrawLettersRow{1} \fi
	\renewcommand\TabellaVotiInizializzaContenitoriIterOpenNum{0}
	\stepcounter{TabellaVotiNumLett}
	\TabellaVotiInizializzaContenitoriIterDigit
}

% Usata all'interno della lettura dell'input per \TabellaVoti quando leggiamo una cifra dall'input
\newcommand\TabellaVotiInizializzaContenitoriIterDigit[1]{
	\ifnum\TabellaVotiInizializzaContenitoriIterOpenNum=0
		\storedataTabellaVotiPuntiPerLettera[#1]
		\renewcommand\TabellaVotiInizializzaContenitoriIterOpenNum{1}
	\else
		\expandafter\g@addto@macro\csname TabellaVotiPuntiPerLettera:\theTabellaVotiNumTabelle:\theTabellaVotiNumLett\endcsname{#1}
	\fi
	\@ifnextcharisdigitelse{
		\TabellaVotiInizializzaContenitoriIterDigit
	}{
		\addtocounter{TabellaVotiPuntiTot}{\csname TabellaVotiPuntiPerLettera:\theTabellaVotiNumTabelle:\theTabellaVotiNumLett\endcsname}
		\@ifnextchar,{
			\storedataTabellaVotiBarraPerLettera[0]
			\TabellaVotiInizializzaContenitoriIterComma[1]
		}{
			\storedataTabellaVotiBarraPerLettera[1]
		}
	}
}

% se il prossimo carattere nel buffer è una cifra esegue #1. Altrimenti esegue #2.
\def\@ifnextcharisdigitelse#1#2{%
  \@ifnextchar0{#1}%
  {\@ifnextchar1{#1}%
  {\@ifnextchar2{#1}%
  {\@ifnextchar3{#1}%
  {\@ifnextchar4{#1}%
  {\@ifnextchar5{#1}%
  {\@ifnextchar6{#1}%
  {\@ifnextchar7{#1}%
  {\@ifnextchar8{#1}%
  {\@ifnextchar9{#1}%
  {#2}}}}}}}}}}}
\makeatother



%%%%%%%%%%%%%%%% MATHCAL E SIMILI

\providecommand{\colInc}{red} % colore per le incognite (\u sta per unknown, ovvero incognita in inglese. Infatti il i comandi come \ux verranno utilizzati prevalentemente per evidenziare le incognite nelle equazioni e nei relativi sistemi)
\newcommand{\ua}[1][\colInc]{\textcolor{#1}{\ra}}
\newcommand{\ub}[1][\colInc]{\textcolor{#1}{\rb}}
\newcommand{\uc}[1][\colInc]{\textcolor{#1}{\rc}}
\newcommand{\ud}[1][\colInc]{\textcolor{#1}{\rd}}
\newcommand{\ue}[1][\colInc]{\textcolor{#1}{\re}}
\newcommand{\uf}[1][\colInc]{\textcolor{#1}{\rf}}
\newcommand{\ug}[1][\colInc]{\textcolor{#1}{\rg}}
\newcommand{\uh}[1][\colInc]{\textcolor{#1}{\rh}}
\newcommand{\ui}[1][\colInc]{\textcolor{#1}{\ri}}
\newcommand{\uj}[1][\colInc]{\textcolor{#1}{\rj}}
\newcommand{\uk}[1][\colInc]{\textcolor{#1}{\rk}}
\newcommand{\ul}[1][\colInc]{\textcolor{#1}{\rl}}
\newcommand{\um}[1][\colInc]{\textcolor{#1}{\rm}}
\newcommand{\un}[1][\colInc]{\textcolor{#1}{\rn}}
\newcommand{\uo}[1][\colInc]{\textcolor{#1}{\ro}}
\newcommand{\up}[1][\colInc]{\textcolor{#1}{\rp}}
\newcommand{\uq}[1][\colInc]{\textcolor{#1}{\rq}}
\newcommand{\ur}[1][\colInc]{\textcolor{#1}{\rr}}
\newcommand{\us}[1][\colInc]{\textcolor{#1}{\rs}}
\newcommand{\ut}[1][\colInc]{\textcolor{#1}{\rt}}
\newcommand{\uu}[1][\colInc]{\textcolor{#1}{\ru}}
\newcommand{\uv}[1][\colInc]{\textcolor{#1}{\rv}}
\newcommand{\uw}[1][\colInc]{\textcolor{#1}{\rw}}
\newcommand{\ux}[1][\colInc]{\textcolor{#1}{\rx}}
\newcommand{\uy}[1][\colInc]{\textcolor{#1}{\ry}}
\newcommand{\uz}[1][\colInc]{\textcolor{#1}{\rz}}
\newcommand{\ra}{\mathrm{a}}
\newcommand{\rb}{\mathrm{b}}
\newcommand{\rc}{\mathrm{c}}
\newcommand{\rd}{\mathrm{d}}
\newcommand{\re}{\mathrm{e}}
\newcommand{\rf}{\mathrm{f}}
\newcommand{\rg}{\mathrm{g}}
\newcommand{\rh}{\mathrm{h}}
\newcommand{\ri}{\mathrm{i}}
\newcommand{\rj}{\mathrm{j}}
\newcommand{\rk}{\mathrm{k}}
\newcommand{\rl}{\mathrm{l}}
\renewcommand{\rm}{\mathrm{m}}
\newcommand{\rn}{\mathrm{n}}
\newcommand{\ro}{\mathrm{o}}
\newcommand{\rp}{\mathrm{p}}
\renewcommand{\rq}{\mathrm{q}}
\newcommand{\rr}{\mathrm{r}}
\newcommand{\rs}{\mathrm{s}}
\newcommand{\rt}{\mathrm{t}}
\newcommand{\ru}{\mathrm{u}}
\newcommand{\rv}{\mathrm{v}}
\newcommand{\rw}{\mathrm{w}}
\newcommand{\rx}{\mathrm{x}}
\newcommand{\ry}{\mathrm{y}}
\newcommand{\rz}{\mathrm{z}}
\newcommand{\rA}{\mathrm{A}}
\newcommand{\rB}{\mathrm{B}}
\newcommand{\rC}{\mathrm{C}}
\newcommand{\rD}{\mathrm{D}}
\newcommand{\rE}{\mathrm{E}}
\newcommand{\rF}{\mathrm{F}}
\newcommand{\rG}{\mathrm{G}}
\newcommand{\rH}{\mathrm{H}}
\newcommand{\rI}{\mathrm{I}}
\newcommand{\rJ}{\mathrm{J}}
\newcommand{\rK}{\mathrm{K}}
\newcommand{\rL}{\mathrm{L}}
\newcommand{\rM}{\mathrm{M}}
\newcommand{\rN}{\mathrm{N}}
\newcommand{\rO}{\mathrm{O}}
\newcommand{\rP}{\mathrm{P}}
\newcommand{\rQ}{\mathrm{Q}}
\newcommand{\rR}{\mathrm{R}}
\newcommand{\rS}{\mathrm{S}}
\newcommand{\rT}{\mathrm{T}}
\newcommand{\rU}{\mathrm{U}}
\newcommand{\rV}{\mathrm{V}}
\newcommand{\rW}{\mathrm{W}}
\newcommand{\rX}{\mathrm{X}}
\newcommand{\rY}{\mathrm{Y}}
\newcommand{\rZ}{\mathrm{Z}}
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cD}{\mathcal{D}}
\newcommand{\cE}{\mathcal{E}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cG}{\mathcal{G}}
\newcommand{\cH}{\mathcal{H}}
\newcommand{\cI}{\mathcal{I}}
\newcommand{\cJ}{\mathcal{J}}
\newcommand{\cK}{\mathcal{K}}
\newcommand{\cL}{\mathcal{L}}
\newcommand{\cM}{\mathcal{M}}
\newcommand{\cN}{\mathcal{N}}
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cQ}{\mathcal{Q}}
\newcommand{\cR}{\mathcal{R}}
\newcommand{\cS}{\mathcal{S}}
\newcommand{\cT}{\mathcal{T}}
\newcommand{\cU}{\mathcal{U}}
\newcommand{\cV}{\mathcal{V}}
\newcommand{\cW}{\mathcal{W}}
\newcommand{\cX}{\mathcal{X}}
\newcommand{\cY}{\mathcal{Y}}
\newcommand{\cZ}{\mathcal{Z}}
\newcommand{\bA}{\mathbb{A}}
\newcommand{\bB}{\mathbb{B}}
\newcommand{\bC}{\mathbb{C}}
\newcommand{\bD}{\mathbb{D}}
\newcommand{\bE}{\mathbb{E}}
\newcommand{\bF}{\mathbb{F}}
\newcommand{\bG}{\mathbb{G}}
\newcommand{\bH}{\mathbb{H}}
\newcommand{\bI}{\mathbb{I}}
\newcommand{\bJ}{\mathbb{J}}
\newcommand{\bK}{\mathbb{K}}
\newcommand{\bL}{\mathbb{L}}
\newcommand{\bM}{\mathbb{M}}
\newcommand{\bN}{\mathbb{N}}
\newcommand{\bO}{\mathbb{O}}
\newcommand{\bP}{\mathbb{P}}
\newcommand{\bQ}{\mathbb{Q}}
\newcommand{\bR}{\mathbb{R}}
\newcommand{\bS}{\mathbb{S}}
\newcommand{\bT}{\mathbb{T}}
\newcommand{\bU}{\mathbb{U}}
\newcommand{\bV}{\mathbb{V}}
\newcommand{\bW}{\mathbb{W}}
\newcommand{\bX}{\mathbb{X}}
\newcommand{\bY}{\mathbb{Y}}
\newcommand{\bZ}{\mathbb{Z}}
\newcommand{\bUNO}{\mathds{1}}

%%%%%%%%%%%%%%%% SI

% pone \colSI = black se il testo è da stampare e come orange altrimenti
\definecolor{coppercolor}{RGB}{184, 115, 51} % colore del rame
\ifnum\value{TipoDocVerificaCounter}=1 \overwriteifempty{\colSI}{black} \else
\ifdefstring{\TipoDoc}{scheda}{\overwriteifempty{\colSI}{black}}{}
\ifdefstring{\TipoDoc}{scheda SSPM}{\overwriteifempty{\colSI}{black}}{}
\ifdefstring{\TipoDoc}{scheda laboratorio}{\overwriteifempty{\colSI}{black}}{}
\ifdefstring{\TipoDoc}{gara olimpiadi}{\overwriteifempty{\colSI}{black}}{}
\overwriteifempty{\colSI}{coppercolor}
\fi

\newcommand{\SI}[1]{\textcolor{\colSI}{\mathrm{#1}}} % per unità di misura. Per scrive metri scrivi \SI{m}
\newcommand{\SIf}[2]{\SI{\frac{#1}{#2}}} % unità di misura in frazione. Per scrivere metri al secondo quadrato scrivi \SIf{m}{s^2}

%%%%%%%%%%%%%%%% ALTRE DEFINIZIONI UTILI

\newcommand{\ang}[3]{#1\widehat{#2}#3} % l'angolo
\newcommand{\bin}[2]{{#1 \choose #2}} % il binomiale di #1 su #2
\newcommand{\vc}[1]{\overrightarrow{#1}} % il vettore (in senso fisico)
\newcommand{\vcp}[3][-5]{\overrightarrow{#2}_{\hspace*{#1pt}#3}} % il vettore (fisico) con pedice

% vettore in senso matematico (esempio su come implementare una funzione con un numero arbitrario di input)
\makeatletter
\newcommand{\vettore}{\begin{pmatrix}\vettoreIter}
\newcommand{\vettoreIter}[1]{#1\@ifnextchar\bgroup{\\\vettoreIter}{\end{pmatrix}}}
\makeatother

\newcommand{\seq}[1][]{\stackrel{#1}{=}} % uguaglianza con commento
\newcommand{\scong}[1][]{\stackrel{#1}{\cong}} % congruenza con commento
\newcommand{\lr}[1][]{\stackrel{#1}{\Longrightarrow}} % implicazioni con commento
\newcommand{\lrt}[1][]{\lr[\text{#1}]}

\newcommand{\qsep}[1]{\quad #1 \quad} % separatore fra dei \quad
\newcommand{\qsr}[2]{\qsep{\stackrel{#2}{#1}}} % separatore fra dei \stackrel
\newcommand{\qqe}{\qqsep{\text{e}}} % separa scrivendo un "e" fra le parti separate
\newcommand{\qlr}[1][]{\qsep{\lrt[#1]}} % separa con un'implicazione
% analoghi ai precenti usando \qquad anziché \quad
\newcommand{\qqsep}[1]{\qquad #1 \qquad}
\newcommand{\qqsr}[2]{\qqsep{\stackrel{#2}{#1}}}
\newcommand{\qe}{\qsep{\text{e}}}
\newcommand{\qqlr}[1][]{\qqsep{\lrt[#1]}}

%%%%%%%%%%%%%%%% STRUMENTI PER IMPLICAZIONI NELLE DIMOSTRAZIONI

% implicazioni per la geometria. Usa come \Impl[nome teo]{{Hp1}{Hp2}...}{th}
\newcommand{\Impl}[3][]{\[\left.\begin{array}{l}\ImplIter#2\end{array}\right\}\,\lrt[#1]\,\text{#3}\]}
\makeatletter
\newcommand{\ImplIter}[1]{{\text{#1}}\@ifnextchar\bgroup{\\\ImplIter}{}}
\makeatother

% i tre criteri di congruenza e i due criteri di similitudine. Da usare come \cc[num crit]{Tr1}{Tr2}{Hp1}{Hp2}{Hp3} e \cs[num crit]{Tr1}{Tr2}{Hp1}{Hp2}
% ad esempio usa come \cc[3]{ABC}{A'B'C'}{$AB \cong A'B'$}{$BC \cong B'C'$}{$CA \cong C'A'$}
\newcommand{\cc}[6][1]{Consideriamo i triangoli $#2$ e $#3$:\Impl[$#1^o$cc]{{#4}{#5}{#6}}{$#2 \cong #3$}}
\newcommand{\cs}[5][1]{Consideriamo i triangoli $#2$ e $#3$:\Impl[$#1^o$cs]{{#4}{#5}}{$#2 \sim #3$}}